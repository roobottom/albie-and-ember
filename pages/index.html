<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Albie and Ember, a children's story</title>
        <meta name="description" content="A children's story about a little girl and her cuddly toy elephant">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="b.css" rel="stylesheet" type="text/css"/>
        <link href="https://fonts.googleapis.com/css?family=ABeeZee" rel="stylesheet"/>
    </head>
    <body>

      <svg aria-hidden="true" style="display:none">
        <!-- these svgs have been compressed as small as I could make them with a combination of https://jakearchibald.github.io/svgomg/ and hand coding -->
        <!-- single <path> svgs are smaller as direct children of <defs> rather than using a <symbol> tag for each one -->
        <defs>
          <!-- leaf -->
          <path id="leaf" d="M9.917 27.033C1.87 16.586.447 0 .447 0s15.476.504 27.645 7.5c12.198 7.013 8.535 19.357 7.035 23.156 3.283 1.438 6.77 2.247 10.467 1.834.06 1.777.123 3.555.184 5.332-4.772-.52-8.83-2.5-12.428-5.233-3.624 1.995-14.295 6.31-23.433-5.557"/>
          <!-- breeze -->
          <path id="breeze" d="M979.5 184.7C648 366.4 210.5-154.8 31 51c-82 93.8 29.8 177.6 91.8 135.7 62-42 0-94-36-74" fill="none" stroke-linecap="round"/>
          <!-- star -->
          <path id="star" d="M13.5 7l6.5 3.4-6.5 3.5L10 24.5 6.5 14 0 10.3 6.5 7 10 .3z"/>
          <!-- boat -->
          <path id="boat" d="M58.7 15.5v50h-30m49 19h-54c-7.8 0-14-6.3-14-14h82c0 7.7-6.3 14-14 14z"/>
          <!-- albie body 1 -->
          <path id="al-b1" d="M132.5 7c-23-4.2-32 11.3-32 11.8C78.7 2.4 52.2-4.5 47.5 3c-4 5.5.7 17.2 9 22.2-27-3.2-54.4-1-55.7 5-4.3 19.5 22.2 16 20 29.2C19 71-1.6 74.6.3 84.7c2.4 12.2 20 24.6 58 21.6 8.7-.6 16.2-1.6 22.5-3-17.3 15.6.8 37.5 23.8 15 7.7-7.5 11-11 15-18.3 46.3 14.6 49-36 20.2-48 0 0 18.2-40-7.5-45"/>
          <!-- albie body 2 -->
          <path id="al-b2" d="M32 118c1.7 20-12.7 70.8 1 83 13.7 12.4 45-13.8 65-15 17.7-1 49 18 61.3 9 15.5-11-5.7-58.2 5.6-63.7 9.6-4.8 47.2 5.3 50.7-15 1.6-19-30-21-33.6-21.3 5-16.7-2.2-35.2-18.2-43.7-25-11.7-46.3 21.7-47.6 2.5-5-74.7-59-55.8-68-36-4.5 9.5-5.8 19.5-3.2 29C43.7 52.3 16.7 3.5 3.7 27c-14 25.2 26 58.3 28.4 91"/>
          <!-- circle -->
          <circle id="circle" cx="0" cy="0" r="100"/>
          <!-- ray -->
          <path id="ray" d="M5 5v30" fill="none" stroke-linecap="round"/>
          <!-- arm -->
          <path id="arm" d="M-55 275.4c121.3-183 82.5-224 88.3-229 8-7.3 11.7 4 19.4 14.3C60.7 71 56 5.3 74 6c11 .3-1.2 43 9 44.4 5.7 1 20.4-53.3 31.2-50C126 4 105.8 50.8 109 53.7 115 59 130 21 138.5 25 151 30.3 124 62 125 69.4c.7 7.4 23.6-15.6 31-10.7 7.5 5-32 29-37 39C101 135.5 19 263 9.5 270.3c-40 30-64.4 5-64.4 5"/>
          <!-- house -->
          <path id="house" d="M150 0L0 99v101h300V99"/>
          <!-- loop -->
          <path id="loop" d="M958.6 114c-469.8 190-526 50.5-525-22.4.6-37.5 28-83 56-89 35-7.2 69.8 10.3 70.6 39 2.4 87.7-248.5 273.2-564.2 182" fill="none" stroke-linecap="round" stroke-dasharray="10,20" stroke-linejoin="round"/>
          <!-- pane -->
          <path id="window" d="M0 0h68v68H0zm78 0h68v68H78zM0 78h68v68H0zm78 0h68v68H78z"/>
          <!-- zzz -->
          <path id="z" d="M11 0L9.2 14.5 36 17.7l-33.7 33L.6 64.3l50.4 6L54.5 56l-29.8-3.6 33.6-33L60 6"/>
          <!-- multi path svgs must be <symbol>s -->
          <symbol id="al-h">
            <path d="M68 6c19.2-13.8 48 3 54 23.4 6.3 20.4-4.3 42-25.6 48-41.6 12-96.4-23-95.4-35C2.6 17.7 18 41.8 68 6z"/>
            <circle fill="currentColor" cx="78.5" cy="18.5" r="5.5"/>
            <circle fill="currentColor" cx="90.5" cy="32.5" r="5.5"/>
          </symbol>
        </defs>
      </svg>

      {# <ol role="navigation" aria-label="Table of contents" class="toc">
        {% for name, item in pages %}
          <li class="toc_i"><a href="#p-{{loop.index}}" aria-label="Go to page {{loop.index}}" class="toc_l">{{loop.index}}</a></li>
        {% endfor %}
      </ol> #}

      <article>
        {% for name, item in pages %}
          {% set pageId = loop.index %}
          <section id="p-{{pageId}}" aria-label="Page {{pageId}} of {{loop.length}}">
            <div class="c">
              {% if item.background %}
              <div class="b">
                {% for background in item.background %}
                  <svg width="{{background.width}}" height="{{background.height}}" viewBox="0 0 {{background.width}} {{background.height}}" class="b{{loop.index}}"><use xlink:href="#{{background.name}}"/></svg>
                {% endfor %}
              </div>
              {% endif %}
              <div class="t">
                {# <p class="l">Page {{loop.index}}</p> #}
                {{item.body|safe}}
              </div>
              {% if item.image %}
              <aside class="i">
                <svg viewBox="0 0 {{item.image.width}} {{item.image.height}}">
                  {% for element in item.image.elements %}
                    <use xlink:href="#{{element.name}}" class="i{{loop.index}}"{% if element.transform %} transform="{{element.transform}}"{% endif %}/>
                  {% endfor %}
                </svg>
              </aside>
              {% endif %}
            </div>
          </section>
        {% endfor %}
      </article>

      <script>
      //defer loading any other extra functionality until this page is fully loaded.
      (function(w, d, undefined) {
        function load(){
            var s = d.createElement('script');
            s.type = 'text/javascript';
            s.src = 'fn.js';
            var x = d.getElementsByTagName('script')[0];
            x.parentNode.insertBefore(s, x);
        }
        if (window.attachEvent)
            w.attachEvent('onload', load);
        else
            w.addEventListener('load', load, false);
      })(window, document);
      </script>
    </body>
</html>
