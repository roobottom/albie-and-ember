"use strict";!function(e,t,n){var a=(!!e.addEventListener,!!e.attachEvent,!!e.history.pushState,!!t.classList,{pages:[],pageSelector:"section",pageTitle:"Albie and Ember, a children's story"}),r=t.querySelectorAll(a.pageSelector),s=function(){i("e.css","screen"),p(),h(),y(),o(e,"scroll",function(){h()}),o(e,"resize",function(){})},o=function(e,t,n){if("object"==typeof t)for(var a in t)e.addEventListener(t[a],n);else e.addEventListener(t,n)},i=function(e,n){n||(n="screen");var a=t.createElement("link");c(a,{href:e,type:"text/css",rel:"stylesheet",media:n}),t.getElementsByTagName("head")[0].appendChild(a)},c=function(e,t){for(var n in t)e.setAttribute(n,t[n])},l=function(){return t.body.getBoundingClientRect().top*-1},p=function(){a.pages=[],Array.prototype.forEach.call(r,function(e,t){a.pages.push(new u(e,f(e)))})},u=function(e,t){this.el=e,this.offset=t},f=function(e){var n=t.body.getBoundingClientRect(),a=e.getBoundingClientRect();return a.top-n.top},h=function(){p();var e=[];a.pages.forEach(function(t,n){t.offset<=l()&&e.push(n+1)});var e=e.pop();return g(e),e},g=function(e){var t=v();e!=t.current&&(d(e),history.replaceState(null,null,"#p-"+e))},d=function(e){t.title="Page "+e+": "+a.pageTitle},v=function(){var t=1;e.location.hash&&(t=parseInt(e.location.hash.match(/\d+$/g)[0]));var n=t+1;a.pages.length<n&&(n=a.pages.length);var r=t-1;r<1&&(r=1);var s={current:t,next:n,prev:r};return s},y=function(){var e=v(),n=t.createElement("nav");c(n,{role:"menu","aria-label":"Navigation controls"});var a=t.createElement("a");c(a,{href:"#p-"+e.next,role:"menuitem",class:"fw","aria-label":"Jump to the next page, press the N or right arrow key."}),a.innerHTML='Next Page <span class="menu_key">N</span><span class="menu_or"> or </span><span class="menu_key">&rarr;</span>';var r=t.createElement("a");c(r,{href:"#p-"+e.prev,role:"menuitem",class:"bk","aria-label":"Jump to the next page, press the P or left arrow key."}),r.innerHTML='Previous Page <span class="menu_key">P</span><span class="menu_or"> or </span><span class="menu_key">&larr;</span>',o(a,["click","touchstart"],function(){var e=v();c(this,{href:"#p-"+e.next}),d(e.next)}),o(r,["click","touchstart"],function(){var e=v();c(this,{href:"#p-"+e.prev}),d(e.prev)}),o(t,"keydown",function(e){"n"!=e.key&&"ArrowRight"!=e.key||a.click(),"p"!=e.key&&"ArrowLeft"!=e.key||r.click()}),n.appendChild(r),n.appendChild(a),t.body.appendChild(n)};s()}(window,document);